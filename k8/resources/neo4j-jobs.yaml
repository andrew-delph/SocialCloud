apiVersion: batch/v1
kind: CronJob
metadata:
  name: neo4j-jobs-train
spec:
  concurrencyPolicy: Forbid
  schedule: '0 0 * * *'
  successfulJobsHistoryLimit: 1
  suspend: false
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: neo4j-jobs
              image: andrewdelph/video-call-neo4j-jobs:latest
              imagePullPolicy: Always
              env:
                - name: JOB
                  value: TRAIN
          restartPolicy: Never
---
apiVersion: batch/v1
kind: CronJob
metadata:
  name: neo4j-jobs-compute
spec:
  concurrencyPolicy: Forbid
  schedule: '0 1-23 * * *'
  successfulJobsHistoryLimit: 1
  suspend: false
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: neo4j-jobs
              image: andrewdelph/video-call-neo4j-jobs:latest
              imagePullPolicy: Always
              env:
                - name: JOB
                  value: COMPUTE
          restartPolicy: Never
---
apiVersion: batch/v1
kind: CronJob
metadata:
  name: neo4j-jobs--short-predict
spec:
  concurrencyPolicy: Forbid
  schedule: '* * * * *'
  successfulJobsHistoryLimit: 1
  suspend: false
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: neo4j-jobs
              image: andrewdelph/video-call-neo4j-jobs:latest
              imagePullPolicy: Always
              env:
                - name: JOB
                  value: SHORT_PREDICT
          restartPolicy: Never
